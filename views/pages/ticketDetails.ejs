<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zgłoszenie #<%= ticket.id %>
    </title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f6f9;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 24px;
            margin-bottom: 24px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
        }

        .info-item strong {
            color: #555;
            font-size: 0.95em;
            margin-bottom: 4px;
        }

        .info-item span {
            font-size: 1.1em;
            color: #2c3e50;
        }

        .description {
            line-height: 1.6;
            font-size: 1.1em;
        }

        .actions {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }

        .action-card {
            flex: 1;
            min-width: 280px;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        label {
            font-weight: 600;
            color: #444;
        }

        select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
        }

        button[type="submit"] {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s;
        }

        button[type="submit"]:hover {
            background-color: #2980b9;
        }

        .back-btn {
            display: inline-block;
            margin-top: 30px;
            padding: 12px 24px;
            background-color: #95a5a6;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .back-btn:hover {
            background-color: #7f8c8d;
        }

        hr {
            display: none;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Zgłoszenie #<%= ticket.id %>
        </h1>

        <div class="card">
            <div class="info-grid">
                <div class="info-item">
                    <strong>Imię i nazwisko:</strong>
                    <span>
                        <%= ticket.imie_nazwisko %>
                    </span>
                </div>
                <div class="info-item">
                    <strong>Numer wewnętrzny:</strong>
                    <span>
                        <%= ticket.numer_wewnetrzny %>
                    </span>
                </div>
                <div class="info-item">
                    <strong>Miejsce zdarzenia:</strong>
                    <span>
                        <%= ticket.miejsce_zdarzenia %>
                    </span>
                </div>
                <div class="info-item">
                    <strong>Dział docelowy:</strong>
                    <span>
                        <%= ticket.dzial_docelowy %>
                    </span>
                </div>
                <div class="info-item">
                    <strong>Kategoria:</strong>
                    <span>
                        <%= ticket.kategoria_zgloszenia %>
                    </span>
                </div>
                <div class="info-item">
                    <strong>Temat:</strong>
                    <span>
                        <%= ticket.temat_zgloszenia %>
                    </span>
                </div>
            </div>
        </div>

        <div class="card">
            <strong>Opis zgłoszenia:</strong>
            <p class="description">
                <%= ticket.opis_zgloszenia %>
            </p>
        </div>

        <div class="card">
            <div class="info-grid">
                <div class="info-item">
                    <strong>Status:</strong>
                    <span>
                        <%= ticket.status_zgloszenia %>
                    </span>
                </div>
                <div class="info-item">
                    <strong>Priorytet:</strong>
                    <span>
                        <%= ticket.priorytet_zgloszenia %>
                    </span>
                </div>
                <div class="info-item">
                    <strong>Powtarzalność:</strong>
                    <span>
                        <%= ticket.powtarzalnosc %>
                    </span>
                </div>
                <div class="info-item">
                    <strong>Utworzone przez:</strong>
                    <span>
                        <%= ticket.utworzone_przez %>
                    </span>
                </div>
                <% if (ticket.created_at) { %>
                    <div class="info-item">
                        <strong>Data utworzenia:</strong>
                        <span>
                            <%= ticket.created_at %>
                        </span>
                    </div>
                    <% } %>
            </div>
        </div>

        <div class="card actions">
            <div class="action-card">
                <form action="/ticket/<%= ticket.id %>/status" method="POST">
                    <label for="status"><strong>Zmień status zgłoszenia:</strong></label>
                    <select name="status_zgloszenia" id="status">
                        <option value="new" <%=ticket.status_zgloszenia==='new' ? 'selected' : '' %>>Nowe</option>
                        <option value="in_progress" <%=ticket.status_zgloszenia==='in_progress' ? 'selected' : '' %>>W
                            realizacji</option>
                        <option value="closed" <%=ticket.status_zgloszenia==='closed' ? 'selected' : '' %>>Zamknięte
                        </option>
                        <option value="canceled" <%=ticket.status_zgloszenia==='canceled' ? 'selected' : '' %>>Anulowane
                        </option>
                    </select>
                    <button type="submit">Zapisz status</button>
                </form>
            </div>

            <div class="action-card">
                <form action="/ticket/<%= ticket.id %>/priorytet" method="POST">
                    <label for="priorytet"><strong>Zmień priorytet zgłoszenia:</strong></label>
                    <select name="priorytet_zgloszenia" id="priorytet">
                        <option value="low" <%=ticket.priorytet_zgloszenia==='low' ? 'selected' : '' %>>Niski</option>
                        <option value="medium" <%=ticket.priorytet_zgloszenia==='medium' ? 'selected' : '' %>>Średni
                        </option>
                        <option value="high" <%=ticket.priorytet_zgloszenia==='high' ? 'selected' : '' %>>Wysoki
                        </option>
                    </select>
                    <button type="submit">Zapisz priorytet</button>
                </form>
            </div>
        </div>

        <a href="javascript:history.back()" class="back-btn">← Powrót</a>
    </div>
</body>

</html>